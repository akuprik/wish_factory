Административные запросы

Авторизация
ресурс :    /api-token-auth
тип запроса : POST
запрос : {"username":"<usename>","password":"<password>"}

ответ
code : 200
body : {"token": "1bed5252e0e161d076dc7c382c5460244d8ffb86"}

OAuth 2.0

1. Получить список опросов
ресурс :  /api/adm/poll/
тип запроса : GET


2. Добавить опрос
Авторизованный пользователь

ресурс :  /api/adm/poll/
тип запроса : POST

   {
        "name": "<poll name>",
        "start_date": "<YYYY-MM-DD>",
        "stop_date": "<YYYY-MM-DD>",
        "description": "<text>"
    },


2. Изменить опрос
Авторизованный пользователь

ресурс :  /api/adm/poll/{pk}/
тип запроса : PATCH / PUT

   {
        "name": "<poll name>",
        "start_date": "<YYYY-MM-DD>",  #при PATCH можно не указывать,
        # изменяться не будет, при PUT указать, но изменений не будет

        "stop_date": "<YYYY-MM-DD>",
        "description": "<text>"
    },

3. Удалить опрос
Авторизованный пользователь

ресурс :  /api/adm/poll/{pk}/
тип запроса : DELETE


4. Получить вопросы
Авторизованный пользователь

ресурс : /api/adm/question/
тип запроса : GET


5. Добавить вопрос
Авторизованный пользователь

ресурс : /api/adm/question/
тип запроса : PUT
   {
        "question_type": "<tx|se|ms>",
        "poll": "<poll pk>",
        "question_text": "<текствопроса>"
    }

5. Изменить вопрос
Авторизованный пользователь

ресурс : /api/adm/question/{pk}
тип запроса : PUT/PATCH
   {
        "question_type": "<tx|se|ms>",
        "poll": "<poll pk>",
        "question_text": "<текствопроса>"
    }


6. Удалить вопрос
Авторизованный пользователь

ресурс : /api/adm/question/{pk}
тип запроса : DELETE


7. Получить варианты ответов
Авторизованный пользователь

ресурс : /api/adm/a-variant/
тип запроса : GET


8. Добавить вариант ответа
Авторизованный пользователь

ресурс : /api/adm/a-variant/
тип запроса : PUT
   {
        "question": "<pk вопроса>",
        "text": "<текста варианта>"
   }

9. Изменить вариант ответа
Авторизованный пользователь

ресурс : /api/adm/a-variant/{pk}
тип запроса : PUT/PATCH
   {
        "question": "<pk вопроса>",
        "text": "<текста варианта>"
    }


10. Удалить вариант ответа
Авторизованный пользователь

ресурс : /api/adm/a-variant/{pk}
тип запроса : DELETE

11. Получить все ответы
Авторизованный пользователь

ресурс : /api/adm/answer/
тип запроса : GET



Запросы пользователя


1. Получить список активных опросов
Не требуется авторизация
ресурс :  /api/polls/
тип запроса : GET

2. Получить список вопросов для активных опросов
Не требуется авторизация
ресурс :  /api/questions/
тип запроса : GET

3. Получить список вариантов ответов на вопросы для активных опросов
Не требуется авторизация
ресурс :  /api/a-variants/
тип запроса : GET



